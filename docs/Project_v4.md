# HH Tool v4 - –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**–û–±–Ω–æ–≤–ª–µ–Ω–æ: 20.09.2025 - —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ**


–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞ —Ä–∞–±–æ—Ç—ã –Ω–∞ HH.ru —á–µ—Ä–µ–∑:
- ü§ñ **–î–µ–º–æ–Ω –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –∑–∞–≥—Ä—É–∑–∫–∞–º–∏ –∫–∞–∂–¥—ã–π —á–∞—Å
- üìä **SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–µ–π
- üéØ **–£–º–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
 - üåê **–í–µ–±-–ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** –Ω–∞ FastAPI (–ø–æ—Ä—Ç 8000)
- üîå **Host2/Host3 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** (PostgreSQL –∏ LLM –∞–Ω–∞–ª–∏–∑ –≤ mock —Ä–µ–∂–∏–º–µ)

 ## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã v4
 
 ### 1. Core (–Ø–¥—Ä–æ) - –ê–ö–¢–£–ê–õ–ò–ó–ò–†–û–í–ê–ù–û
 
 - `scheduler_daemon.py` - ‚úÖ –î–µ–º–æ–Ω –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ —Å 6 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –∑–∞–¥–∞—á–∞–º–∏
 - `task_database.py` - ‚úÖ –•—Ä–∞–Ω–∏–ª–∏—â–µ v4 (SQLite) —Å –º–µ—Ç–æ–¥–∞–º–∏ –¥–ª—è –∑–∞–¥–∞—á, –≤–∞–∫–∞–Ω—Å–∏–π, —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–π –∏ –ª–æ–≥–æ–≤
- `task_dispatcher.py` - ‚úÖ –î–∏—Å–ø–µ—Ç—á–µ—Ä –∑–∞–¥–∞—á —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Host2/Host3
- `host2_client.py` - ‚úÖ PostgreSQL –∫–ª–∏–µ–Ω—Ç (mock —Ä–µ–∂–∏–º)
- `host3_client.py` - ‚úÖ LLM –∫–ª–∏–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –≤–∞–∫–∞–Ω—Å–∏–π (mock —Ä–µ–∂–∏–º)
- `models.py` - ‚úÖ –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
### 2. Plugins (–ü–ª–∞–≥–∏–Ω—ã) - –ò–°–ü–†–ê–í–õ–ï–ù–û
- `fetcher_v4.py` - ‚úÖ –ó–∞–≥—Ä—É–∑—á–∏–∫ –≤–∞–∫–∞–Ω—Å–∏–π —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º User-Agent –∏ fallback –ª–æ–≥–∏–∫–æ–π
- `base.py` - ‚úÖ –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è –ø–ª–∞–≥–∏–Ω–æ–≤

### 3. CLI (–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏) - –†–ê–°–®–ò–†–ï–ù
- `cli_v4.py` - ‚úÖ 10+ –∫–æ–º–∞–Ω–¥: daemon, load-vacancies, status, tasks, export, stats, test, cleanup, system
- –£–¥–∞–ª—ë–Ω —É—Å—Ç–∞—Ä–µ–≤—à–∏–π `run_v4.py` - –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ `python cli_v4.py test readiness`

### 4. Configuration (–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- `config/config_v4.json` - –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
- `config/filters.json` - –§–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ –≤–∞–∫–∞–Ω—Å–∏–π (–∏–∑ v3)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ –∑–∞–¥–∞—á

### –°—Ö–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   CLI Commands  ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Task Dispatcher ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Worker Pool    ‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ                  ‚îÇ    ‚îÇ  (3 threads)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚îÇ                        ‚îÇ
                                ‚ñº                        ‚ñº
                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                       ‚îÇ   SQLite Queue   ‚îÇ    ‚îÇ  Chunked Tasks  ‚îÇ
                       ‚îÇ  - tasks table   ‚îÇ    ‚îÇ  500 per chunk  ‚îÇ
                       ‚îÇ  - progress      ‚îÇ    ‚îÇ  timeout ctrl   ‚îÇ
                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–∏—Ö –∑–∞–¥–∞—á
```
50k –≤–∞–∫–∞–Ω—Å–∏–π ‚Üí 100 chunks –ø–æ 500 –≤–∞–∫–∞–Ω—Å–∏–π
‚îÇ
‚îú‚îÄ‚îÄ Chunk 1: pages 0-5 (500 vacancies) ‚Üí Worker 1
‚îú‚îÄ‚îÄ Chunk 2: pages 5-10 (500 vacancies) ‚Üí Worker 2  
‚îú‚îÄ‚îÄ Chunk 3: pages 10-15 (500 vacancies) ‚Üí Worker 3
‚îÇ   ...
‚îî‚îÄ‚îÄ Chunk 100: pages 495-500 (500 vacancies) ‚Üí Worker 1
```

## –£–ø—Ä–æ—â–µ–Ω–∏—è –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å v3

### –ò—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ v4:
‚ùå **Async/await** - —Ç–æ–ª—å–∫–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
‚ùå **FastAPI/WebSockets** - –ø—Ä–æ—Å—Ç–æ–π HTTP —Å–µ—Ä–≤–µ—Ä –≤ CLI  
‚ùå **–°–ª–æ–∂–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã** - –ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ fetcher, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
‚ùå **SSH –æ–ø–µ—Ä–∞—Ü–∏–∏** - —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞
‚ùå **Docker** - –Ω–∞—Ç–∏–≤–Ω–æ–µ Python –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚ùå **Redis** - SQLite –¥–ª—è –≤—Å–µ–≥–æ

### –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∏–∑ v3:
‚úÖ **–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö** - –ø–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
‚úÖ **–§–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞** - —Ç–µ –∂–µ 4 –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–∞
‚úÖ **SQLite storage** - —É–ª—É—á—à–µ–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –¥–ª—è –∑–∞–¥–∞—á
‚úÖ **–ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –ø–ª–∞–≥–∏–Ω–æ–≤** - –¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- **–¶–µ–ª–µ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞**: 50k –≤–∞–∫–∞–Ω—Å–∏–π/–¥–µ–Ω—å
- **Chunk size**: 500 –≤–∞–∫–∞–Ω—Å–∏–π –Ω–∞ –∑–∞–¥–∞—á—É
- **Worker pool**: 3 –ø–æ—Ç–æ–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **Rate limiting**: 1 —Å–µ–∫ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∫ API
- **Timeout**: 3600 —Å–µ–∫ –Ω–∞ –∑–∞–¥–∞—á—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### SQLite –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–í—Å—Ç–∞–≤–∫–∏**: 1000+ INSERT/—Å–µ–∫ (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –Ω–∞—à–µ–π –Ω–∞–≥—Ä—É–∑–∫–∏ ~0.6/—Å–µ–∫)
- **WAL mode**: –≤–∫–ª—é—á–µ–Ω –¥–ª—è concurrent access
- **ACID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: –≥–∞—Ä–∞–Ω—Ç–∏—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- **Backup**: –ø—Ä–æ—Å—Ç–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –ë–î

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### config_v4.json - –æ—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```json
{
  "task_dispatcher": {
    "max_workers": 3,           // threading pool size
    "chunk_size": 500,          // vacancies per chunk  
    "default_timeout_sec": 3600 // task timeout
  },
  "vacancy_fetcher": {
    "rate_limit_delay": 1.0,    // delay between API calls
    "max_pages_per_filter": 200 // safety limit
  },
  "database": {
    "path": "data/hh_v4.sqlite3",
    "wal_mode": true            // concurrent access
  }
}
```

### filters.json - —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ (–∏–∑ v3)
```json
{
  "filters": [
    {
      "id": "python-remote",
      "name": "Python —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ (—É–¥–∞–ª–µ–Ω–∫–∞)",  
      "params": {
        "text": "python",
        "area": 1,
        "schedule": "remote",
        "experience": "between1And3"
      },
      "active": true
    }
    // ... –µ—â–µ 3 —Ñ–∏–ª—å—Ç—Ä–∞
  ]
}
```

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞ SQLite v4
```sql
-- –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á
CREATE TABLE tasks (
    id TEXT PRIMARY KEY,
    type TEXT NOT NULL,           -- load_vacancies, process_pipeline, cleanup
    status TEXT NOT NULL,         -- pending, running, completed, failed
    params_json TEXT,             -- –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–¥–∞—á–∏
    progress_json TEXT,           -- –ø—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    result_json TEXT,             -- —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    error TEXT,                   -- —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏
    created_at REAL,
    started_at REAL,
    finished_at REAL,
    schedule_at REAL,             -- –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫
    timeout_sec INTEGER,          -- —Ç–∞–π–º–∞—É—Ç –∑–∞–¥–∞—á–∏
    worker_id TEXT                -- –∫–∞–∫–æ–π worker –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
);

-- –í–∞–∫–∞–Ω—Å–∏–∏ (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å v3)
CREATE TABLE vacancies (
    id INTEGER PRIMARY KEY,
    title TEXT,
    company TEXT,
    url TEXT,
    salary_from INTEGER,
    salary_to INTEGER,
    currency TEXT,
    area TEXT,
    published_at TEXT,
    description TEXT,
    key_skills TEXT,
    employment TEXT,
    schedule TEXT,
    experience TEXT,
    raw_json TEXT,
    processed_at REAL,
    filter_id TEXT,               -- –∫–∞–∫–æ–π —Ñ–∏–ª—å—Ç—Ä –Ω–∞—à–µ–ª
    content_hash TEXT
);
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –¢–∏–ø–∏—á–Ω—ã–π workflow
```bash
# 1. –ó–∞–ø—É—Å–∫ –¥–µ–º–æ–Ω–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ (–ø–æ–¥–Ω–∏–º–µ—Ç –≤–µ–±‚Äë–ø–∞–Ω–µ–ª—å)
python -m core.scheduler_daemon

# 2. –¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (1 —Å—Ç—Ä–∞–Ω–∏—Ü–∞)
python cli_v4.py load_vacancies -f "python-remote" -p 1

# 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
python cli_v4.py status
python cli_v4.py tasks

# 4. –ë–æ–µ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
python cli_v4.py load_vacancies

# 5. –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
python cli_v4.py cleanup
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞
```bash
# –î–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏
python cli_v4.py task-info <task_id>

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–¥–∞—á–∏
python cli_v4.py tasks --limit 20

# –¢–æ–ª—å–∫–æ failed –∑–∞–¥–∞—á–∏  
python cli_v4.py tasks --status failed

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤
python cli_v4.py filters
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤
- `logs/app.log` - –µ–¥–∏–Ω—ã–π —Ñ–∞–π–ª –ª–æ–≥–æ–≤ —Å–∏—Å—Ç–µ–º—ã (—Ä–æ—Ç–∞—Ü–∏—è 100 –ú–ë, 3 –∞—Ä—Ö–∏–≤–∞)
- Console - –∫—Ä–∞—Ç–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```python
# –í config_v4.json
"logging": {
  "level": "INFO",    // DEBUG, INFO, WARNING, ERROR
  "format": "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
}
```

## Roadmap

### –ë–ª–∏–∂–∞–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (–≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞)
1. **–¢–µ—Å—Ç—ã** - unit –∏ integration —Ç–µ—Å—Ç—ã –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
2. **Scripts** - —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è backup, migration, monitoring
3. **Analyzer plugin** - LLM –∞–Ω–∞–ª–∏–∑ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –≤–∞–∫–∞–Ω—Å–∏–π
4. **Classifier plugin** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
5. **Web dashboard** - —É–ª—É—á—à–µ–Ω–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
6. **Docker** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è deployment

### –í–æ–∑–º–æ–∂–Ω—ã–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
1. **Redis queue** - –µ—Å–ª–∏ SQLite —Å—Ç–∞–Ω–µ—Ç —É–∑–∫–∏–º –º–µ—Å—Ç–æ–º
2. **Horizontal scaling** - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ workers —á–µ—Ä–µ–∑ Redis
3. **FastAPI** - –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π REST API
4. **Prometheus** - –µ—Å–ª–∏ –Ω—É–∂–Ω—ã –¥–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

## –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å v3
- ‚úÖ **–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö**: –ø–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ **–§–∏–ª—å—Ç—Ä—ã**: –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–µ –∂–µ —Å–∞–º—ã–µ
- ‚úÖ **SQLite —Å—Ö–µ–º–∞ –≤–∞–∫–∞–Ω—Å–∏–π**: —Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å v3
- ‚ö†Ô∏è **–ü–ª–∞–≥–∏–Ω—ã**: –Ω—É–∂–Ω–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

### –ü–µ—Ä–µ–Ω–æ—Å –¥–∞–Ω–Ω—ã—Ö –∏–∑ v3
```bash
# TODO: —Å–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
# python scripts/migrate_v3_to_v4.py
```

## –û—Ç–ª–∏—á–∏—è –æ—Ç v3

| –ê—Å–ø–µ–∫—Ç | v3 | v4 |
|--------|----|----|
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | Async/await + FastAPI | Sync + threading |
| **–û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á** | –ù–µ—Ç | SQLite-based |  
| **Chunked processing** | –ù–µ—Ç | ‚úÖ 500 per chunk |
| **Timeout control** | –ù–µ—Ç | ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π |
| **SSH –æ–ø–µ—Ä–∞—Ü–∏–∏** | ‚úÖ | ‚ùå –£–±—Ä–∞–Ω—ã |
| **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** | FastAPI + WebSocket | –ü—Ä–æ—Å—Ç–æ–π HTTP |
| **–ü–ª–∞–≥–∏–Ω—ã** | Async pipeline | Sync (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è) |
| **Deployment** | Docker | Native Python |
| **Dependencies** | –ú–Ω–æ–≥–æ | –ú–∏–Ω–∏–º—É–º |

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

HH Tool v4 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —ç–≤–æ–ª—é—Ü–∏—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã v3 —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞:
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –¥–µ–º–æ–Ω –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
- **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å** - —Å–∏—Å—Ç–µ–º–∞ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –≤–µ–±-–ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** - –≥–æ—Ç–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Host2 (PostgreSQL) –∏ Host3 (LLM)

## üéØ –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–° (20.09.2025 22:30)

**‚úÖ –°–ò–°–¢–ï–ú–ê –í PRODUCTION:**
- –î–µ–º–æ–Ω –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω–æ
- –í–µ–±-–ø–∞–Ω–µ–ª—å –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ http://localhost:8000  
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∞–∫–∞–Ω—Å–∏–π –∫–∞–∂–¥—ã–π —á–∞—Å
- –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
- –ü—Ä–æ–µ–∫—Ç –æ—á–∏—â–µ–Ω –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**
