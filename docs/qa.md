# Вопросы к требованиям HH-бота v4

*Создано: 19.09.2025 16:13:24*

## 1. Критические вопросы к требованиям

### 1.1. Неточности в описании бизнес-процесса
**Q1.1.1:** В п.1.1.1 указано "искать новые уникальные резюме", но далее по тексту речь идет о вакансиях. Что именно нужно искать - резюме или вакансии? вакансии

**Q1.1.2:** В п.1.1.8 "откликаться с письмами" - требуется ли предварительное одобрение пользователем каждого отклика или система должна откликаться автоматически? пользователь выставляет статус - пока вручную в БД

### 1.2. Архитектурные противоречия
**Q1.2.1:** Требования описывают 3-хостовую архитектуру, но текущая v4 реализована как монолит. Нужно ли реализовывать распределенную архитектуру или адаптировать требования под текущую? мы ранее создавали хост 1, остальные хосты пока не приступали. Нужно запустить надежно хост 1 вначале.

**Q1.2.2:** В п.3.1.2 указана PostgreSQL как БД2, но в текущей v4 используется SQLite. Планируется ли миграция на PostgreSQL? SQLite останется как БД1.

### 1.3. LLM интеграция
**Q1.3.1:** В п.1.2.2 упоминается "Local pre-classifier" - что это за компонент и как он должен работать? Это разные regexp грязного отбора неподходящих вакансий.

**Q1.3.2:** Какие конкретно LLM API планируется использовать? Есть ли приоритетность (Ollama vs Yandex vs OpenAI)? Пока делаем хост 1 без LLM. Потом попробуем облачное.

**Q1.3.3:** В п.2.9 "Авторизация LLM" - как должна работать ротация ключей при исчерпании лимитов? В файле auth_roles.json указаны приоритеты и применимость для загрузки/откликов. Крутим внутри применимости. При повторных отказах API для всех ключей в круге стоит остановиться и написать в лог причину.

### 1.4. Неопределенные критерии
**Q1.4.1:** В п.2.15.1 и 2.16.1 "отбор по критериям" - какие конкретно критерии релевантности? пока ручной процесс в БД.

**Q1.4.2:** В п.2.1.1 "процессор >90%" - это критерий проблемы или нормы? Критерии проблемы.

**Q1.4.3:** В п.2.2.5 "LLM ресурсы <минимума" - что считается минимумом для разных провайдеров? Деньги и токены LLM менее минимума - добавить 2 параметра в конфигурацию.

## 2. Упущения из описания аналитика

### 2.1. Отсутствующие технические детали
**U2.1.1:** Не указаны форматы экспорта данных (Excel, CSV, JSON?)  - csv, UTF-8
**U2.1.2:** Не описан механизм версионирования вакансий и работодателей - после проверки на наборе полей-ключей выявится отличие, то новая версия, кроме если 1 версия. Было описание в архивах ContentHash_Configuration_v3.md
**U2.1.3:** Отсутствует описание схемы БД и связей между таблицами - нужно проверить актуальность Database_Schema_v4.md
**U2.1.4:** Не указаны лимиты API HH.ru и стратегия их обхода - было  описание Captcha_Diagnostics_v1.md по алгоритму тестирования входа, лимиты описаны в api.hh.ru

### 2.2. Безопасность и отказоустойчивость
**U2.2.1:** Не описана обработка сбоев сети и API
**U2.2.2:** Отсутствуют требования к backup и восстановлению данных
**U2.2.3:** Не указана стратегия обработки банов от HH.ru
**U2.2.4:** Отсутствует описание логирования для аудита действий

### 2.3. Пользовательский интерфейс
**U2.3.1:** Не описан интерфейс для редактирования сопроводительных писем (п.1.1.7) - пока вручную в БД
**U2.3.2:** Отсутствует описание интерфейса для проставления статусов "Откликнуться" - пока вручную в БД
**U2.3.3:** Не указан способ настройки профиля пользователя для LLM-анализа - не понятно, это текстовое описание

### 2.4. Производительность и масштабирование
**U2.4.1:** Не указаны требования к производительности (RPS, время отклика) - ориентир 1-10 вакансий в секунду - загрузка.
**U2.4.2:** Отсутствует описание стратегии кэширования - пока без.
**U2.4.3:** Не описана обработка больших объемов данных (>30k вакансий) - пока без.

## 3. Расхождения с текущей v4

### 3.1. Архитектурные расхождения
**D3.1.1:** **Монолит vs Микросервисы**: Текущая v4 - монолитное приложение, требования описывают 3-хостовую архитектуру = пока делаем хост 1 и предполагаем расширение.

**D3.1.2:** **База данных**: v4 использует SQLite, требования предполагают PostgreSQL как БД2 - 2 БД на разных хостах.

**D3.1.3:** **Синхронность**: v4 реализована как синхронная система с диспетчером задач, требования подразумевают асинхронную обработку - мы же запускаем демона и он управляет запусками задач в очереди.

### 3.2. Функциональные расхождения
**D3.2.1:** **LLM интеграция**: В v4 отсутствует интеграция с LLM, что является ключевым требованием - пока без.    

**D3.2.2:** **Telegram уведомления**: В v4 нет модуля отправки уведомлений в Telegram - пока без.

**D3.2.3:** **Автоматические отклики**: v4 не поддерживает автоматическую отправку откликов через API HH - пока без.

**D3.2.4:** **Версионирование данных**: v4 не реализует версионирование вакансий и работодателей - обязательно.

### 3.3. Отсутствующие компоненты
**D3.3.1:** **Самодиагностика**: Модуль мониторинга ресурсов системы - вторым приоритетом.
**D3.3.2:** **Сервис-демон**: Автозапуск и управление жизненным циклом - вроде был сделан.
**D3.3.3:** **Обслуживание**: Автоматическая очистка и архивирование данных - вроде был сделан.
**D3.3.4:** **Анализ работодателей**: Сбор дополнительной информации о компаниях - второй приоритет.

### 3.4. Существующие компоненты требующие доработки
**D3.4.1:** **Панель мониторинга**: Есть базовый веб-интерфейс, но требуется расширение функционала
**D3.4.2:** **Диспетчер задач**: Реализован, но нужна интеграция с новыми типами задач
**D3.4.3:** **Загрузка вакансий**: Работает, но нужна поддержка версионирования
**D3.4.4:** **Фильтры поиска**: Реализованы, но нужен интерфейс управления - пока без него.

## 4. Рекомендации по приоритизации

### 4.1. Критический путь (Блокеры)
1. **Уточнить бизнес-процесс**: Резюме vs Вакансии (Q1.1.1)
2. **Определить архитектуру**: Монолит vs Распределенная (Q1.2.1)
3. **Выбрать LLM провайдера**: Конкретные API и ключи (Q1.3.2)

### 4.2. Высокий приоритет
1. **LLM интеграция**: Основа для 5 из 8 бизнес-задач
2. **Telegram уведомления**: Критично для мониторинга
3. **Автоматические отклики**: Ключевая автоматизация

### 4.3. Средний приоритет
1. **Самодиагностика**: Важно для production
2. **Версионирование данных**: Нужно для аналитики изменений
3. **Расширение веб-панели**: UX улучшения

### 4.4. Низкий приоритет
1. **Миграция на PostgreSQL**: Можно отложить
2. **Распределенная архитектура**: Оптимизация для будущего
3. **Анализ работодателей**: Дополнительная аналитика

*Обновлено: 19.09.2025 16:13:24*
