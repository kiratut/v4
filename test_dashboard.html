<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Dashboard v4</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .card { border: 1px solid #ccc; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .status-row { display: flex; gap: 10px; margin-bottom: 20px; }
        .status-card { flex: 1; background: #f5f5f5; }
        .dashboard-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .header { text-align: center; margin-bottom: 20px; }
        .subtitle { font-size: 0.9em; color: #666; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üìä HH Tool v4 Dashboard</h1>
        <div class="subtitle">–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ JavaScript</div>
        <button id="manualRefreshBtn" onclick="manualRefresh()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
    </div>

    <div class="status-row">
        <div class="card status-card" id="system_health">
            <div class="status-title">System Health</div>
            <div class="status-value" id="system_health_value">Loading...</div>
        </div>
        <div class="card status-card" id="daemon_status">
            <div class="status-title">Daemon Status</div>
            <div class="status-value" id="daemonStatus">Loading...</div>
        </div>
    </div>

    <div class="dashboard-grid">
        <div class="card" id="tasks_queue">
            <div class="card-header">
                <div class="card-title">Tasks Queue</div>
            </div>
            <div id="taskStats">Loading...</div>
        </div>
        
        <div class="card" id="filters_management">
            <div class="card-header">
                <div class="card-title">Filters</div>
            </div>
            <div id="activeFilters">Loading...</div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –Ω–∞—à JavaScript -->
    <script src="web/static/dashboard.js?v=20250923231400"></script>
    
    <!-- –¢–µ—Å—Ç–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è -->
    <script>
        console.log("üß™ Test Dashboard loaded");
        
        function manualRefresh() {
            console.log("üîÑ Manual refresh triggered");
            if (typeof refreshAll === 'function') {
                refreshAll();
            } else {
                console.error("‚ùå refreshAll function not found - dashboard.js not loaded properly");
            }
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É dashboard.js
        setTimeout(() => {
            if (typeof buildDashboard === 'function') {
                console.log("‚úÖ dashboard.js loaded successfully");
                buildDashboard();
            } else {
                console.error("‚ùå buildDashboard function not found");
            }
        }, 1000);
    </script>
</body>
</html>
